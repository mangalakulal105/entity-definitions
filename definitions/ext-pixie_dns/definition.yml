domain: EXT
type: PIXIE_DNS
synthesis:
  rules:
  - identifier: dns.dns_server
    name: dns.dns_server 
    encodeIdentifierInGUID: true
    # Matching dns metrics
    conditions:
    - attribute: metricName
      prefix: dns. 
    - attribute: instrumentation.provider
      value: pixie
    tags:
      k8s.cluster.name:
      pixie.cluster.id:
      k8s.namespace.name:
      k8s.pod.name:
      service.name:
  - identifier: dns.dns_server
    name: dns.dns_server 
    encodeIdentifierInGUID: true
    conditions:
    # Matching dns traces
    - attribute: newRelic.ingestPoint
      value: api.traces
    - attribute: dns.dns_server
      present: true
    - attribute: instrumentation.provider
      value: pixie
    tags:
      k8s.cluster.name:
      pixie.cluster.id:
      k8s.namespace.name:
      k8s.pod.name:
      service.name:
dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  alertable: true
