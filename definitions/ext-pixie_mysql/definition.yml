domain: EXT
type: PIXIE_MYSQL
synthesis:
  rules:
  - compositeIdentifier:
      separator: "/"
      attributes:
        - mysql.service.name
        - mysql.namespace.name
        - px.cluster.id
    name: mysql.service.name
    encodeIdentifierInGUID: true
    # Matching mysql metrics
    conditions:
    - attribute: metricName
      prefix: mysql.
    - attribute: instrumentation.provider
      value: pixie
    tags:
      k8s.cluster.name:
  - compositeIdentifier:
      separator: "/"
      attributes:
        - mysql.service.name
        - mysql.namespace.name
        - px.cluster.id
    name: mysql.service.name
    encodeIdentifierInGUID: true
    conditions:
    # Matching mysql traces
    - attribute: newRelic.ingestPoint
      value: api.traces
    - attribute: mysql.req_cmd
      present: true
    - attribute: instrumentation.provider
      value: pixie
    tags:
      k8s.cluster.name:
dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  alertable: true
