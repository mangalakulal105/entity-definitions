queriesPerSecond:
  title: Queries per second
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: average(query.queriesPerSecond)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    # defaulting to newRelic query for now since we cannot match value functions for OpenTelemetry cumulative metrics.
    # opentelemetry:
    #   select: average(`mysql.operations`)
    #   from: Metric
slowQueriesPerMinute:
  title: Slow queries per minute
  unit: REQUESTS_PER_MINUTE
  queries:
    newRelic:
      select: average(query.slowQueriesPerSecond) * 60
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    # defaulting to newRelic query for now since we cannot match value functions for OpenTelemetry cumulative metrics.
    # opentelemetry:
    #   select: average(`mysql.query.slow.count`)
    #   from: Metric
  
connectionsPerSecond:
  title: Connections per second
  unit: COUNT
  queries:
    newRelic:
      select: average(net.connectionsPerSecond)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    # defaulting to newRelic query for now since we cannot match value functions for OpenTelemetry cumulative metrics.
    # opentelemetry:
    #   select: average(`mysql.connection.count`)
    #   from: Metric

queriesQuestions:
  queries:
    newRelic:
      eventId: entityGuid
      select: average(`query.questionsPerSecond`)
      from: MysqlSample
      eventName: entityName
    # defaulting to newRelic query for now since we cannot match value functions for OpenTelemetry cumulative metrics.
    # opentelemetry:
    #   select: average(mysql.query.count)
    #   from: Metric
  unit: OPERATIONS_PER_SECOND
  title: Query questions
threads:
  queries:
    newRelic:
      eventId: entityGuid
      eventName: entityName
      select: latest(`net.threadsConnected`)
      from: MysqlSample
    opentelemetry:
      select: latest(`mysql.connection.count`)
      from: Metric
  unit: COUNT
  title: Threads connected

